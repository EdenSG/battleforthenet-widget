function stupidIEZoomFix(){ieVersion?($(".loading-region").addClass("zoomedOut").addClass("IE"),$("#modal").addClass("fullyVisible").addClass("IE"),setTimeout(function(){$("#header").addClass("fullyVisible").addClass("IE")},150)):($(".loading-region").addClass("zoomedOut").addClass("notIE"),$("#modal").addClass("fullyVisible").addClass("notIE"),setTimeout(function(){$("#header").addClass("fullyVisible").addClass("notIE")},150))}var hue=parseFloat(window.location.hash.match(/\d+/)),animations={modal:{options:{debug:!1,skipEmailSignup:!1,skipCallTool:!1,fastAnimation:!1,boxUnchecked:!1},phoneCallAllowed:!0,zipcode:null,org:"fftf",init:function(a){for(var b in a)this.options[b]=a[b];return this},start:function(){this.options.skipEmailSignup&&($("#direct_call").show(),$("#petition").hide(),$(".bottom-link").hide()),this.options.skipCallTool&&(this.phoneCallAllowed=!1),this.options.boxUnchecked&&$("#opt-in").attr("checked",!1),this.options.fastAnimation||document.fastForwardAnimation?($("body").addClass("fast-animation"),setTimeout(stupidIEZoomFix,10)):setTimeout(stupidIEZoomFix,2250),document.showCTATextImmediately&&($("#header h1").css("opacity",0),$("#header .cta").css("opacity",1)),this.optimizelyTextAB(),Math.random()<.16&&($("#fftf_disclosure").hide(),$("#fp_disclosure").show(),this.org="fp"),$("a.close").click(function(a){a.preventDefault(),$("body").addClass("closed"),trackLeaderboardStat({stat:"close_widget",data:"modal"}),setTimeout(function(){sendMessage("stop")},750)}),$("a.letter").click(function(a){a.preventDefault(),$("#overlay").css("display","block"),setTimeout(function(){$("#overlay").addClass("visible")},50)}),$("a.continue").click(function(){$("#overlay").removeClass("visible"),setTimeout(function(){$("#overlay").css("display","none")},750)}),$("a#cantcall").click(function(a){a.preventDefault(),this.showFinal()}.bind(this)),$("form[name=petition]").submit(function(a){a.preventDefault(),this.postUser($(this))&&($("input:not([type=image],[type=button],[type=submit])").val(""),this.phoneCallAllowed?this.showPhoneCall():this.showFinal())}.bind(this)),$("form[name=direct_call]").submit(function(a){a.preventDefault();var b=this.validatePhone($("#phone_front").val());b?(this.placePhonecall(b),this.showFinalWithCallInstructions()):$("#phone_front").addClass("error")}.bind(this)),$("a.facebook").click(function(){trackLeaderboardStat({stat:"share",data:"facebook"})}),$("a.twitter").click(function(){trackLeaderboardStat({stat:"share",data:"twitter"})}),$("#call").click(function(a){a.preventDefault();var b=this.validatePhone($("#phone").val());return b?($("#call").attr("disabled",!0),$("#phone").attr("disabled",!0),this.placePhonecall(b),void setTimeout(function(){this.showFinalWithCallInstructions()}.bind(this),1e3)):$("#phone").addClass("error")}.bind(this)),$.ajax({url:"//fftf-geocoder.herokuapp.com/",dataType:"json",type:"get",success:function(a){a.country&&a.country.iso_code&&($("#country").val(a.country.iso_code),"US"!=a.country.iso_code&&(this.phoneCallAllowed=!1,this.options.skipEmailSignup&&sendMessage("stop")))}.bind(this)})},log:function(){this.options.debug&&console.log.apply(console,arguments)},postUser:function(){var a=["address1","email","name","zip"],b={},c=!1,d=$("form[name=petition]");if(a.forEach(function(a){$("input[name="+a+"]",d).removeClass("error"),$("input[name="+a+"]",d)[0]&&""===$("input[name="+a+"]",d).val()?(c=!0,$("input[name="+a+"]",d).addClass("error")):b[a]=$("input[name="+a+"]",d).val()}),c)return!1;this.zipcode=$("#zip").val();var e=/^\d{5}$/;return e.test(this.zipcode)||(this.phoneCallAllowed=!1),b.action_comment="",b.country=$("#country").val(),0==$("#opt-in").is(":checked")&&(b.opt_out=!0),b.org=this.org,$.ajax({url:"https://queue.battleforthenet.com/submit",type:"post",dataType:"json",data:b,success:function(a){userID=a.userID}}),trackLeaderboardStat({stat:"submit_form"}),this.trackOptimizely("fcc_post"),!0},trackOptimizely:function(a){window.optimizely=window.optimizely||[],window.optimizely.push(["trackEvent",a])},showFinalWithCallInstructions:function(){$("#stepFinal .defaultText").hide(),$("#stepFinal .altText").show(),this.showFinal()},validatePhone:function(a){return a=a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,""),a=a.replace("+","").replace(/\-/g,""),"1"==a.charAt(0)&&(a=a.substr(1)),10!=a.length?!1:a},placePhonecall:function(a){$("#call").html("Calling...");var b={campaignId:"battleforthenet",userPhone:a,fftfCampaign:"internetslowdown",fftfReferer:host,fftfSession:session};this.zipcode&&(b.zipcode=this.zipcode),$.ajax({url:"https://call-congress.fightforthefuture.org/create",type:"get",dataType:"json",data:b,success:function(a){console.log("Placed call-congress call: ",a)}}),this.trackOptimizely("call_congress")},showFinal:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),$("#stepCall").css("opacity",0),setTimeout(function(){$("#step1").css("visibility","hidden"),$("#stepCall").css("visibility","hidden")},1e3),$("#stepFinal").show(),setTimeout(function(){$("#stepFinal").css("opacity",1)},10)},showPhoneCall:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),setTimeout(function(){$("#step1").css("visibility","hidden")},1e3),$("#stepCall").show(),setTimeout(function(){$("#stepCall").css("opacity",1)},10)},optimizelyTextAB:function(){var a=null;document.textVariation&&(a=document.textVariation);var b=function(a,b,c){$("#header h1").html(a),$("#header .cta p em").html(b),$("#header .cta p strong").html(c)};switch(a){case"variation1":b("<em>If this site was still loading,</em> would you still be here?","Big ISPs want the power to slow (and break!) sites like ours.","Tell lawmakers: &ldquo;Stop discrimination. Defend net neutrality.&rdquo;");break;case"variation2":b("<em>If this site was still loading,</em> would you still be here?","Big ISPs want the power to slow (and break!) sites like ours.","Don't let them destroy the best parts of the Internet. Sign now!");break;case"variation3":b("<em>If this site was still loading,</em> would you still be here?","Comcast wants the power to slow (and break!) any website.","Only you can stop them. Please, sign this letter.");break;case"variation4":b("<em>If this site was still loading,</em> would you still be here?","Cable giants want the power to slow (and break!) sites like ours.","Tell lawmakers: &ldquo;Stop discrimination. Defend net neutrality.&rdquo;")}}}};$(document).ready(function(){$("#header h1").html($("h1.headline").html()),$("#header .cta p").html($("p.cta-hidden-trust-me").html()),setTimeout(function(){$("#header .cta").css("height",$("#header").outerHeight()+"px"),$("#letter").css("height",$("#modal").outerHeight()+"px"),$("#letter").css("opacity",1)},1e3);var a=function(a){for(var b=[{element:$("#overlay"),cssProp:"background",colorValue:"hsla("+a+", 30%, 20%, 0.2)"},{element:$(".loading-region, #modal"),cssProp:"background",colorValue:"hsl("+a+", 33%, 85%)"},{element:$("#header"),cssProp:"color",colorValue:"hsl("+a+", 21%, 24%)"},{element:$(".action"),cssProp:"background",colorValue:"hsl("+a+", 20%, 35%)"},{element:$(".action a.read"),cssProp:"color",colorValue:"hsl("+a+", 22%, 46%)"},{element:$("button, #overlay .letter > a"),cssProp:"background",colorValue:"linear-gradient(to bottom, hsl("+(a-39)+", 61%, 45%) 0%, hsl("+(a-39)+", 61%, 40%) 100%)"},{element:$(".disclosure a"),cssProp:"color",colorValue:"hsl("+a+", 36%, 72%)"},{element:$("#modal .action .disclosure"),cssProp:"color",colorValue:"hsl("+a+", 36%, 72%)"},{element:$("#header .cta .links a"),cssProp:"color",colorValue:"hsl("+a+", 17%, 63%)"},{element:$("a.close"),cssProp:"background",colorValue:"hsl("+a+", 20%, 35%)"}],c=0;c<b.length;c++)b[c].element.css(b[c].cssProp,b[c].colorValue)};a(hue),-1!=window.location.href.indexOf("EMBED")&&(document.body.className="embedded",-1!=window.location.href.indexOf("NOCALL")&&(animations.modal.options.skipCallTool=!0),-1!=window.location.href.indexOf("NOEMAIL")&&(animations.modal.options.skipEmailSignup=!0),-1!=window.location.href.indexOf("UNCHECK")&&(animations.modal.options.boxUnchecked=!0),animations.modal.options.fastAnimation=!0,animations.modal.start())});for(var ie10Styles=["msTouchAction","msWrapFlow","msWrapMargin","msWrapThrough","msOverflowStyle","msScrollChaining","msScrollLimit","msScrollLimitXMin","msScrollLimitYMin","msScrollLimitXMax","msScrollLimitYMax","msScrollRails","msScrollSnapPointsX","msScrollSnapPointsY","msScrollSnapType","msScrollSnapX","msScrollSnapY","msScrollTranslation","msFlexbox","msFlex","msFlexOrder"],ie11Styles=["msTextCombineHorizontal"],b=document.body,s=b.style,ieVersion=null,property,i=0;i<ie10Styles.length;i++)property=ie10Styles[i],void 0!=s[property]&&(ieVersion="ie10");for(var i=0;i<ie11Styles.length;i++)property=ie11Styles[i],void 0!=s[property]&&(ieVersion="ie11");ieVersion&&(document.getElementById("modal").className="IE",document.getElementById("header").className="IE");